function Layer(a){this.unit=a}console.log("Page Loaded");var Input=function(){function a(a){var b=a.keyCode,c=String.fromCharCode(b);-1!==f.indexOf(c)&&(a.preventDefault(),d[c]=!0,e&&console.log(c))}function b(a){var b=a.keyCode,c=String.fromCharCode(b);-1!==f.indexOf(c)&&(a.preventDefault(),d[c]=!1,e&&console.log(c))}function c(){window.addEventListener("keydown",a),window.addEventListener("keyup",b)}var d={},e=!1,f="ASDQWEZXCVBN";return{init:c,keys:d}}(),Loader=function(){function a(){f.load()}var b="images/",c={backgroundImage:"background1.png",foregroundImage:"foreground1.png",gamespaceImage:"random_trans.png",squidImage:"squid.png",squidAnim:"squid.anim",squidJson:"squid.json"},d={};_.each(c,function(a,c){d[c]=b+a});var e=_.map(c,function(a){return b+a});console.log(d),console.log(e);var f=new PIXI.AssetLoader(e);return f.onComplete=function(){Background.init(),Foreground.init(),Gamespace.init(),Renderer.play()},{assets:c,path:d,load:a}}(),stats=new Stats;stats.setMode(0),stats.domElement.style.position="absolute",stats.domElement.style.left="0px",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement);var Screen=function(){var a=960,b=640,c=new PIXI.Stage(15794175,!0);return{width:a,height:b,stage:c}}();Layer.prototype.width=8192,Layer.prototype.height=4096,Layer.prototype.init=function(){this.sprite.x=Screen.width/2,this.sprite.y=Screen.height/2,this.sprite.scale={x:this.scale,y:this.scale},Screen.stage.addChild(this.sprite)},Layer.prototype.focus=function(a,b){var c=a.x/this.width,d=a.y/this.height;this.sprite.scale={x:this.scale*this.unit*b,y:this.scale*this.unit*b},this.sprite.x=Screen.width/2-a.x+this.width*(1-this.unit*b)*c,this.sprite.y=Screen.height/2-a.y+this.height*(1-this.unit*b)*d};var Background=new Layer(1);Background.init=function(){this.sprite=PIXI.Sprite.fromImage(Loader.path.backgroundImage),this.scale=8,Layer.prototype.init.call(this)};var Foreground=new Layer(1);Foreground.init=function(){var a=this;this.sprite=PIXI.Sprite.fromImage(Loader.path.foregroundImage),this.sprite.setInteractive(!0),this.sprite.mousedown=function(b){var c=b.getLocalPosition(a.sprite);console.log(c.x,c.y)},this.scale=8,Layer.prototype.init.call(this)};var Gamespace=new Layer(1);Gamespace.init=function(){var a=PIXI.Texture.fromImage(Loader.path.gamespaceImage);this.sprite=new PIXI.TilingSprite(a,this.width,this.height);var b=new PIXI.Spine(Loader.path.squidAnim);b.x=500,b.y=500,b.state.setAnimationByName("animation",!0),this.sprite.addChild(b),this.scale=1,Layer.prototype.init.call(this)};var SSL=function(){var a=100,b=100,c=10,d={x:1,y:1},e={x:10,y:10},f={x:0,y:0};return{width:a,height:b,health:c,center:f,velocity:e,acceleration:d}}(),Camera=function(){function a(){Input.keys.A&&(h.x-=c),Input.keys.D&&(h.x+=c),Input.keys.W&&(h.y-=c),Input.keys.S&&(h.y+=c),Input.keys.Z&&(b*=1.01),Input.keys.X&&(b/=1.01),Input.keys.C&&(e*=1.01),Input.keys.V&&(e/=1.01),Input.keys.B&&(d*=1.01),Input.keys.N&&(d/=1.01),.25>b&&(b=.25),b>1&&(b=1),.5>e&&(e=.5),e>1&&(e=1),.25>d&&(d=.25),d>1&&(d=1),Background.unit=d,Foreground.unit=e,h.x<f&&(h.x=f),h.x>Gamespace.width-f&&(h.x=Gamespace.width-f),h.y<g&&(h.y=g),h.y>Gamespace.height-g&&(h.y=Gamespace.height-g),Background.focus(h,b),Foreground.focus(h,b),Gamespace.focus(h,b)}var b=1,c=10,d=.5,e=1,f=Screen.width/2,g=Screen.height/2,h={x:0,y:0};return{render:a}}(),Renderer=function(){function a(){e.view.style.width=$(window).width()+"px",e.view.style.height=$(window).width()/1.5+"px"}function b(){f=!1,requestAnimFrame(d)}function c(){f=!0}function d(){f||(Camera.render(),e.render(Screen.stage),requestAnimFrame(d),stats.update())}var e=new PIXI.autoDetectRenderer(Screen.width,Screen.height),f=!0;return e.view.style.display="block",e.view.style.margin="auto",a(),document.body.appendChild(e.view),$(window).resize(function(){a()}),{play:b,pause:c,resize:a}}();Input.init(),Loader.load();